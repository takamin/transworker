<!doctype HTML>
<html>
<head>
<title>Find Prime Numbers</title>
<style type="text/css">
span { display:inline-block; padding:10px; margin:2px; }
.label {
    width:120px; text-align:center;
    background-color:silver; border: solid gray 1px; }
</style>
</head>
<body>
<h1>Find Prime Numbers</h1>
Clock: <span id="clock"></span> (The foreground thread blocks this clock)
<div>
    Find 50000 prime numbers by
    <button type="button" id="buttonFindPrimes">Foreground process</button>
    or
    <button type="button" id="buttonFindPrimesMT">Background process</button>
    <span id="result"></span>
</div>

<script src="prime.js"></script>
<script src="../../transworker.js"></script>
<script type="text/javascript">
(() => {
    setInterval(() => {
        document.getElementById("clock").innerHTML = (new Date()).toString();
    }, 100);
    const numOfPrimes = 50000;
    const result = document.getElementById('result');
    const clearResult = () => {
        result.innerHTML = "";
    };
    const addPrime = (prime => {
        const spanPrime = document.createElement('SPAN');
        spanPrime.innerHTML = prime;
        result.appendChild(spanPrime);
    });
    const listPrimes = (primes => {
        if(primes == null) {return;}
        primes.forEach((prime) => { addPrime(prime); });
    });
    document.getElementById("buttonFindPrimes").addEventListener("click", () => {
        clearResult();
        const prime = new Prime();
        setTimeout(() => {
            prime.findPrimes(numOfPrimes);
            listPrimes(prime.getPrimes());
        }, 0);
    });
    document.getElementById("buttonFindPrimesMT").addEventListener("click", () => {
        clearResult();
        const prime = TransWorker.create("./prime_worker.js", Prime);
        prime.findPrimes(numOfPrimes, () => {
            clearResult();
            prime.getPrimes(listPrimes);
        });
    });
})();
</script>
</body>
</html>

